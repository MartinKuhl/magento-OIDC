<!--
    Provider Settings tab â€” Section A: Provider Identity.
    Rendered inside the Widget\Tabs form on the mooauth/provider/edit page.
    The enclosing <form> and hidden fields are provided by the Edit container block.
-->
<?php
/** @var \MiniOrange\OAuth\Block\Adminhtml\Provider\Edit\Tab\ProviderSettings $block */
/** @var \Magento\Framework\Escaper $escaper */

$data      = $block->getProviderData();
$val       = static function (string $key, $default = '') use ($data) {
    return $data[$key] ?? $default;
};
$loginType = (string) $val('login_type', 'both');
$isActive  = isset($data['id']) ? (bool)(int) $val('is_active', 1) : true;
$btnColor  = (string) $val('button_color', '#eb5202');
?>
<div class="admin__fieldset-wrapper">
    <div class="admin__fieldset-wrapper-title">
        <span class="admin__fieldset-wrapper-title-text">
            <?= $escaper->escapeHtml(__('Provider Identity')) ?>
        </span>
        <p class="admin__field-note" style="font-style:italic; margin-top:8px;">
            <?= $escaper->escapeHtml(__('Basic identity and appearance settings for this provider.')) ?>
        </p>
    </div>

    <table class="admin__table-primary" style="width:100%; margin-top:16px;">
        <tbody>
            <tr>
                <td style="width:220px;">
                    <label for="app_name">
                        <strong>
                            <?= $escaper->escapeHtml(__('Provider Name')) ?>
                            <span style="color:red">*</span>
                        </strong>
                    </label>
                </td>
                <td>
                    <input type="text"
                           id="app_name"
                           name="app_name"
                           required
                           class="admin__control-text"
                           placeholder="e.g. Authelia"
                           value="<?= $escaper->escapeHtmlAttr($val('app_name')) ?>"
                           style="width:100%;">
                    <small class="admin__field-note">
                        <?= $escaper->escapeHtml(__('Internal identifier used in the codebase.')) ?>
                    </small>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="display_name">
                        <strong><?= $escaper->escapeHtml(__('Display Name')) ?></strong>
                    </label>
                </td>
                <td>
                    <input type="text"
                           id="display_name"
                           name="display_name"
                           class="admin__control-text"
                           placeholder="e.g. Login with Authelia"
                           value="<?= $escaper->escapeHtmlAttr($val('display_name')) ?>"
                           style="width:100%;">
                    <small class="admin__field-note">
                        <?= $escaper->escapeHtml(__('Label shown on the SSO button.')) ?>
                    </small>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="login_type">
                        <strong><?= $escaper->escapeHtml(__('Login Type')) ?></strong>
                    </label>
                </td>
                <td>
                    <select id="login_type" name="login_type" class="admin__control-select" style="width:100%;">
                        <option value="customer"
                            <?= $loginType === 'customer' ? 'selected="selected"' : '' ?>>
                            <?= $escaper->escapeHtml(__('Customer')) ?>
                        </option>
                        <option value="admin"
                            <?= $loginType === 'admin' ? 'selected="selected"' : '' ?>>
                            <?= $escaper->escapeHtml(__('Admin')) ?>
                        </option>
                        <option value="both"
                            <?= $loginType === 'both' ? 'selected="selected"' : '' ?>>
                            <?= $escaper->escapeHtml(__('Both')) ?>
                        </option>
                    </select>
                    <small class="admin__field-note">
                        <?= $escaper->escapeHtml(__('Who can use this provider to log in.')) ?>
                    </small>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="is_active">
                        <strong><?= $escaper->escapeHtml(__('Active')) ?></strong>
                    </label>
                </td>
                <td>
                    <input type="checkbox"
                           id="is_active"
                           name="is_active"
                           class="admin__control-checkbox"
                           value="1"
                           <?= $isActive ? 'checked="checked"' : '' ?>>
                    <small class="admin__field-note" style="margin-left:6px;">
                        <?= $escaper->escapeHtml(__('Uncheck to disable this provider.')) ?>
                    </small>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="sort_order">
                        <strong><?= $escaper->escapeHtml(__('Sort Order')) ?></strong>
                    </label>
                </td>
                <td>
                    <input type="number"
                           id="sort_order"
                           name="sort_order"
                           class="admin__control-text"
                           value="<?= (int) $val('sort_order', 0) ?>"
                           min="0"
                           style="width:80px;">
                    <small class="admin__field-note" style="margin-left:6px;">
                        <?= $escaper->escapeHtml(__('Lower numbers appear first.')) ?>
                    </small>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="button_label">
                        <strong><?= $escaper->escapeHtml(__('Button Label')) ?></strong>
                    </label>
                </td>
                <td>
                    <input type="text"
                           id="button_label"
                           name="button_label"
                           class="admin__control-text"
                           placeholder="e.g. Login with SSO"
                           value="<?= $escaper->escapeHtmlAttr($val('button_label')) ?>"
                           style="width:100%;">
                    <small class="admin__field-note">
                        <?= $escaper->escapeHtml(__('Leave empty to use the Display Name.')) ?>
                    </small>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="button_color">
                        <strong><?= $escaper->escapeHtml(__('Button Color')) ?></strong>
                    </label>
                </td>
                <td>
                    <input type="color"
                           id="button_color"
                           name="button_color"
                           value="<?= $escaper->escapeHtmlAttr($btnColor) ?>"
                           style="width:60px; height:36px; padding:2px; cursor:pointer;">
                    <small class="admin__field-note" style="margin-left:6px;">
                        <?= $escaper->escapeHtml(__('Hex colour for the SSO login button.')) ?>
                    </small>
                </td>
            </tr>
        </tbody>
    </table>
</div>
