<!-- 
    This template shows a SSO box on the admin backend pages
    Use this if you want to show a sso button on your backend pages
-->
<style>
    #login-form .form-actions {
        width: 100% !important;
        display: block !important;
        box-sizing: border-box !important;
    }
    #login-form .form-actions > .actions {
        width: 100% !important;
        display: block !important;
        box-sizing: border-box !important;
    }
</style>

<div class="actions" style="text-align:center; width:100%; display:block; box-sizing:border-box;">
    <div style="display:flex; flex-direction:row; flex-wrap:nowrap; align-items:center; width:100%; gap:10px; margin-bottom:10px;">
        <span style="flex:1 1 0%; height:1px; background-color:#969393;"></span>
        <span style="flex:0 0 auto; white-space:nowrap; font-weight:bold; color:#444;">OR</span>
        <span style="flex:1 1 0%; height:1px; background-color:#969393;"></span>
    </div>
    <button
        type="button"
        class="action-login action-primary"
        style="margin-top:3%; padding: 3% 14%; width:100%; text-align:center; box-sizing:border-box;"
        onclick="window.location.href='<?= $escaper->escapeUrl($block->getAdminSPInitiatedUrl(null, $block->getAppName())) ?>';"
    >
        <?= $escaper->escapeHtml($block->getSSOButtonText()) ?>
    </button>
</div>

<?php if ($block->isNonOidcAdminLoginDisabled()): ?>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var usernameField = document.querySelector('.field-username');
            if (usernameField) { usernameField.style.display = 'none'; }

            var passwordField = document.querySelector('.field-password');
            if (passwordField) { passwordField.style.display = 'none'; }

            var legend = document.querySelector('#login-form .admin__legend');
            if (legend) {
                legend.style.display = 'none';
                if (legend.nextSibling && legend.nextSibling.nodeName === 'BR') {
                    legend.nextSibling.style.display = 'none';
                }
            }

            var actionsDivs = document.querySelectorAll('.form-actions .actions');
            actionsDivs.forEach(function (div) {
                if (!div.querySelector('[onclick]')) {
                    div.style.display = 'none';
                }
            });

            var forgotPasswordDiv = document.querySelector('#login-form .links');
            if (forgotPasswordDiv) { forgotPasswordDiv.style.display = 'none'; }
        });
    </script>
<?php endif; ?>
